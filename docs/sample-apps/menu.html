<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lua in Browser</title>
    <base href="https://pengowray.github.io/luagarden/luagarden-0.1/">
    <script src="marked.min.js"></script>
    <script src="fengari-web.js"></script>
    <script src="luagarden.js" type="module"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <div id="log-area"></div>
<script totype="application/lua" src="defer.js">

local js = require "js"
local log = js.global.gardenlog


function menu() 
    log:clear();
    log:print("## Welcome to Lua Garden.")

    log:print("What to do now?")
    log:createButton("Tell a joke", joke)
    log:createButton("Show player profiles", profile)
    log:createButton("Make something better", editme)

end

function joke()
    log:print("Why did the chicken cross the road?")
    log:createButton("Answer", answer)
end

function answer()
    log:print("To get to the other side!")
    log:createButton("That joke is old!", editme)
    log:createButton("Back to menu", menu)
end

function profile()
    local person = {
        name = "John Doe",
        icon = "ðŸ‘¨",
        votes = 3,
    }
    log:printCard(js.new(js.global.Object, person))
    log:printCard(js.new(js.global.Object, {name = "Jane Doe", icon = "ðŸ‘©", votes = 4}))
    log:createButton("How about different people?", editme)
    log:createButton("Back to menu", menu)
end

function editme()
    log:print("## You can edit this file!")
    log:print("Edit the Lua in this web page to so it creates more interesting experiences! It'll take some imagination.")
    log:print("## How?")
    log:print(" 1. Save this page to your computer, then open it in a text editor.")
    log:print(" 2. Change the Lua code in the `<script>` tag to make it do something different.")
    log:print(" 3. Save the file, then open it in a web browser.")
    log:createButton("Back to menu", menu)
end

menu()

</script>
</body>
</html>